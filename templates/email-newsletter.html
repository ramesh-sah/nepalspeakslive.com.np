  <!-- Newsletter Modal -->
<div id="newsletter-overlay"
  class="fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 hidden">
  <div id="newsletter-modal"
    class="bg-[#dee3ca] text-black w-full max-w-lg mx-4 sm:mx-auto rounded-2xl shadow-2xl p-8 relative transform scale-95 opacity-0 transition-all duration-300 ease-out border border-gray-700">

    <!-- Close button -->
    <button id="newsletter-close" aria-label="Close newsletter modal"
      class="absolute top-4 right-4 text-black hover:text-black text-3xl font-bold leading-none">&times;</button>

    <!-- Logo + Header -->
    <div class="text-center mb-6">
      <div class="flex items-center justify-center mb-3">
        <!-- Optional Logo -->
        <div class="flex items-center space-x-2">
          <!-- <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
            stroke-width="1.5" stroke="currentColor" class="w-8 h-8 text-black">
            <path stroke-linecap="round" stroke-linejoin="round"
              d="M3 21l9-18 9 18H3z" />
          </svg> -->
          <h2 class="text-2xl font-bold tracking-wide uppercase">Nepal Speaks Live</h2>
        </div>
      </div>
      <h3 class="text-xl sm:text-2xl font-semibold text-black mb-2">Join Our Newsletter</h3>
      <p class="text-black text-sm sm:text-base">Stay on top of world headlines and Everest updates.</p>
    </div>

    <!-- Newsletter Form -->
    <form id="newsletter-form" method="POST" action="{% url 'newsletter' %}"

      class="space-y-4" novalidate>
          {% csrf_token %}
  

      <div>
        <label for="full-name" class="sr-only">Full Name</label>
        <input id="full-name" type="text" name="full_name" placeholder="Your Full Name" required
          class="w-full px-4 py-3 border border-gray-600 rounded-lg bg-transparent text-black placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-white transition" />
      </div>

      <div>
        <label for="newsletter-email" class="sr-only">Email Address</label>
        <input id="newsletter-email" type="email" name="email" placeholder="you@example.com" required
          class="w-full px-4 py-3 border border-gray-600 rounded-lg bg-transparent text-black placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-white transition" />
      </div>

      <div class="flex justify-center pt-2">
        <button id="newsletter-submit" type="submit"
          class="w-full sm:w-auto bg-black text-white font-semibold px-8 py-3 rounded-lg hover:bg-gray-400 hover:text-black transition-colors duration-200 ease-in-out">
          Subscribe
        </button>
      </div>

      <p id="newsletter-msg" class="hidden text-center text-sm text-red-400 mt-2"></p>
    </form>
  </div>
</div>

<!-- JavaScript -->
<script>
  (function () {
    const overlay = document.getElementById('newsletter-overlay');
    const modal = document.getElementById('newsletter-modal');
    const closeBtn = document.getElementById('newsletter-close');
    const form = document.getElementById('newsletter-form');
    const msg = document.getElementById('newsletter-msg');
    const nameInput = document.getElementById('full-name');
    const emailInput = document.getElementById('newsletter-email');

    function isValidEmail(email) {
      return /\S+@\S+\.\S+/.test(email);
    }

    function showModal() {
      overlay.classList.remove('hidden');
      setTimeout(() => modal.classList.remove('opacity-0', 'scale-95'), 100);
    }

    function hideModal() {
      modal.classList.add('opacity-0', 'scale-95');
      setTimeout(() => overlay.classList.add('hidden'), 250);
    }

    // Auto show once if not subscribed
    if (!localStorage.getItem('newsletterSubscribed')) {
      window.addEventListener('load', () => setTimeout(showModal, 800));
    }

    closeBtn.addEventListener('click', hideModal);
    overlay.addEventListener('click', e => {
      if (e.target === overlay) hideModal();
    });

    form.addEventListener('submit', function (e) {
      msg.classList.add('hidden');

      if (!nameInput.value.trim()) {
        e.preventDefault();
        msg.textContent = 'Please enter your full name.';
        msg.classList.remove('hidden');
        nameInput.focus();
        return;
      }

      if (!isValidEmail(emailInput.value.trim())) {
        e.preventDefault();
        msg.textContent = 'Please enter a valid email address.';
        msg.classList.remove('hidden');
        emailInput.focus();
        return;
      }

      try {
        localStorage.setItem('newsletterSubscribed', 'true');
      } catch (err) {
        console.warn('localStorage error:', err);
      }
    });
  })();
</script>
